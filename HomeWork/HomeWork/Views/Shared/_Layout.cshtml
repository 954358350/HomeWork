<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <link href="~/bootstrap-3.3.0/dist/css/bootstrap.min.css" rel="stylesheet" />
    <link href="~/css/font.css" rel="stylesheet" />
    <script src="~/js/jquery.min.js"></script>
    <script src="~/Scripts/jquery-ui-1.8.20.min.js"></script>
    <link href="~/Content/themes/base/jquery-ui.css" rel="stylesheet" />
    <script src="~/Scripts/jquery.unobtrusive-ajax.min.js"></script>
     <script src="~/bootstrap-3.3.0/dist/js/bootstrap.min.js"></script>
    <script src="~/uploader-master/src/dmuploader.min.js"></script>
    <link href="~/uploader-master/demos/css/simple-demo.css" rel="stylesheet" />
    <link href="~/uploader-master/demos/css/uploader.css" rel="stylesheet" />
    <title>@ViewBag.Title</title>
    @Styles.Render("~/Content/css")
    @Scripts.Render("~/bundles/modernizr")
</head>
<body >
    <div>
        <div style="float: left">
            <img src="~/image/Log.png" />
        </div>
        <div style="float: right">
                <ul class="nav nav-pills" role="tablist">
                    <li role="presentation" class="active"><a href="#">刷新</a></li>
                    <li role="presentation"><a href="#">注销</a></li>
                    <li role="presentation"><a href="#">问题反馈</a></li>
                </ul>
            </div>
    </div>
    <br />
    <br />
    <div class="carousel slide" style="height:40px"><span style="float:left">&nbsp;&nbsp;&nbsp;&nbsp;</span>
    </div>
    <br />
    @RenderBody()

    @Scripts.Render("~/bundles/jquery")
    @RenderSection("scripts", required: false)
     <script>
         $.ajaxSetup({ cache: false });
         function a(data) {
             $(".a").html(data);
         }
    </script>
    <script>

        $('#myTab a').click(function (e) {
            e.preventDefault()
            $(this).tab('show')
        })

        $('#myTab a[href="#profile"]').tab('show') // Select tab by name
        $('#myTab a:first').tab('show') // Select first tab
        $('#myTab a:last').tab('show') // Select last tab
        $('#myTab li:eq(2) a').tab('show') // Select third tab (0-indexed)
    </script>
    <script type="text/javascript">

        //-- Some functions to work with our UI
        function add_log(message) {
            var template = '<li>[' + new Date().getTime() + '] - ' + message + '</li>';

            $('#debug').find('ul').prepend(template);
        }

        function add_file(id, file) {
            var template = '' +
              '<div class="file" id="uploadFile' + id + '">' +
                '<div class="info">' +
                  '#1 - <span class="filename" title="Size: ' + file.size + 'bytes - Mimetype: ' + file.type + '">' + file.name + '</span><br /><small>Status: <span class="status">Waiting</span></small>' +
                '</div>' +
                '<div class="bar">' +
                  '<div class="progress" style="width:0%"></div>' +
                '</div>' +
              '</div>';

            $('#fileList').prepend(template);
        }

        function update_file_status(id, status, message) {
            $('#uploadFile' + id).find('span.status').html(message).addClass(status);
        }

        function update_file_progress(id, percent) {
            $('#uploadFile' + id).find('div.progress').width(percent);
        }

        // Upload Plugin itself
        $('#drag-and-drop-zone').dmUploader({
            url: '/demos/dnd/upload.php',
            dataType: 'json',
            allowedTypes: 'image/*',
            /*extFilter: 'jpg;png;gif',*/
            onInit: function () {
                add_log('Penguin initialized :)');
            },
            onBeforeUpload: function (id) {
                add_log('Starting the upload of #' + id);

                update_file_status(id, 'uploading', 'Uploading...');
            },
            onNewFile: function (id, file) {
                add_log('New file added to queue #' + id);

                add_file(id, file);
            },
            onComplete: function () {
                add_log('All pending tranfers finished');
            },
            onUploadProgress: function (id, percent) {
                var percentStr = percent + '%';

                update_file_progress(id, percentStr);
            },
            onUploadSuccess: function (id, data) {
                add_log('Upload of file #' + id + ' completed');

                add_log('Server Response for file #' + id + ': ' + JSON.stringify(data));

                update_file_status(id, 'success', 'Upload Complete');

                update_file_progress(id, '100%');
            },
            onUploadError: function (id, message) {
                add_log('Failed to Upload file #' + id + ': ' + message);

                update_file_status(id, 'error', message);
            },
            onFileTypeError: function (file) {
                add_log('File \'' + file.name + '\' cannot be added: must be an image');

            },
            onFileSizeError: function (file) {
                add_log('File \'' + file.name + '\' cannot be added: size excess limit');
            },
            /*onFileExtError: function(file){
              $.danidemo.addLog('#demo-debug', 'error', 'File \'' + file.name + '\' has a Not Allowed Extension');
            },*/
            onFallbackMode: function (message) {
                alert('Browser not supported(do something else here!): ' + message);
            }
        });
    </script>
</body>
</html>
